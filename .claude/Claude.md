# Conversation Guidelines

- å¸¸ã«æ—¥æœ¬èªžã§ä¼šè©±ã™ã‚‹

# æŠ•ç¥¨ãƒ»è­°è«–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã®ã€Œã‚¹ãƒšãƒ¼ã‚¹ã€ã‚’ä½œæˆã—ã€2æŠžæŠ•ç¥¨ã§æ„è¦‹ã‚’å‹Ÿã‚Šè­°è«–ã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®æŠ•ç¥¨çµæžœè¡¨ç¤ºã€èª¬å¾—æ©Ÿèƒ½ã€ãƒã‚¤ãƒ³ãƒˆåˆ¶åº¦ã‚’å«ã‚€é«˜æ©Ÿèƒ½ãªæŠ•ç¥¨ãƒ»è­°è«–ã‚·ã‚¹ãƒ†ãƒ ã€‚

### ðŸŽ¯ ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³ (2025å¹´6æœˆ)

**âœ… é–‹ç™ºé€²æ—: ãƒ•ã‚§ãƒ¼ã‚º1-2å®Œäº† + ãƒã‚¹ãƒˆæŠ•ç¨¿æ©Ÿèƒ½å®Ÿè£…å®Œäº† (ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿)**

- **èªè¨¼ãƒ»æŠ•ç¨¿ãƒ»æŠ•ç¥¨ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: å®Œå…¨å®Ÿè£…
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¥¨ãƒ»èª¬å¾—ã‚¿ã‚¤ãƒ **: å®Ÿè£…æ¸ˆã¿
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸æ©Ÿèƒ½**: æ–°è¦å®Ÿè£…å®Œäº† (2025-06-17)
- **ãƒã‚¹ãƒˆæŠ•ç¨¿æ©Ÿèƒ½**: **æ–°è¦å®Ÿè£…å®Œäº† (2025-06-18)** - GitHub Issue #12å¯¾å¿œ
- **UI/UXãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: å®Œæˆ
- **Supabaseãƒ•ãƒ«çµ±åˆ**: å®Œäº†
- **ãƒ¢ãƒ€ãƒ³ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: React 19 + TypeScript + Tailwind CSS

**ðŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  (GitHub Issue #13)
- ã‚³ãƒ¡ãƒ³ãƒˆå…±æ„Ÿãƒ»èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢æ©Ÿèƒ½ (GitHub Issue #2)
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **React 19.0.0** (æœ€æ–°ç‰ˆã€ä¸¦è¡Œãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°)
- **TypeScript** (åž‹å®‰å…¨æ€§)
- **Vite 6.3.1** (é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«)
- **React Router 7.5.1** (ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³)

### ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãƒ»UI

- **Tailwind CSS 4.1.4** (ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ)
- **Radix UI** (ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–)
- **Lucide React** + **React Icons** (ã‚¢ã‚¤ã‚³ãƒ³)
- **React Toastify** (é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ )

### çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ

- **TanStack Query 5.74.4** (ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç®¡ç†)
- **Jotai 2.12.5** (ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†)

### ãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

- **React Hook Form 7.57.0** (ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†)
- **Zod 3.25.64** (ã‚¹ã‚­ãƒ¼ãƒžãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³)
- **Hookform Resolvers** (çµ±åˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª)

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

- **Supabase 2.49.4** (BaaS: PostgreSQL + Auth + Storage + Real-time)
- **Row Level Security (RLS)** (ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡)
- **Supabase Storage** (ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰)

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

- **ESLint 9.22.0** + **TypeScript ESLint** (ã‚³ãƒ¼ãƒ‰å“è³ª)
- **Prettier 3.5.3** (ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ)
- **Vite Plugin React 4.3.4** (Reactæœ€é©åŒ–)

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶ãƒ»æ©Ÿèƒ½ä»•æ§˜

### 1. èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

- Supabase Auth ã«ã‚ˆã‚‹èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã‚¢ãƒã‚¿ãƒ¼ã€çµ±è¨ˆæƒ…å ±ï¼‰
- ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ç®¡ç†ï¼ˆç„¡æ–™/ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰/ãƒ—ãƒ©ãƒãƒŠ/ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ï¼‰

### 2. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»æŠ•ç¨¿ã‚·ã‚¹ãƒ†ãƒ 

- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£**: æ—¢å­˜ã® `communities` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ´»ç”¨ï¼ˆã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã‚¹ãƒšãƒ¼ã‚¹ï¼‰
- **ãƒã‚¹ãƒˆæŠ•ç¨¿**: 2æŠžæŠ•ç¥¨ï¼ˆè³›æˆ/åå¯¾ã€A/Bç­‰ï¼‰ã‚’å«ã‚€è­°é¡ŒæŠ•ç¨¿
- **ãƒã‚¹ãƒˆæ§‹é€ **: **æœ€å¤§3æ®µéšŽã¾ã§ã®æŠ•ç¨¿ãƒã‚¹ãƒˆå®Œå…¨å®Ÿè£…æ¸ˆã¿**ï¼ˆparent_post_idä½¿ç”¨ï¼‰
- **æ´¾ç”Ÿè³ªå•æ©Ÿèƒ½**: **æŠ•ç¥¨è€…çµžã‚Šè¾¼ã¿å¯¾å¿œæ¸ˆã¿**ï¼ˆè³›æˆè€…å‘ã‘/åå¯¾è€…å‘ã‘/å…¨å“¡å‘ã‘ï¼‰
- **ãƒ¡ãƒ‡ã‚£ã‚¢å¯¾å¿œ**: ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç”»åƒã®ã¿ï¼ˆimage_url, avatar_urlæ´»ç”¨ï¼‰

### 3. æŠ•ç¥¨ãƒ»èª¬å¾—ã‚·ã‚¹ãƒ†ãƒ 

- **æŠ•ç¥¨ãƒ«ãƒ¼ãƒ«**:
  - åˆå›žæŠ•ç¥¨ + èª¬å¾—ã‚¿ã‚¤ãƒ ä¸­ã®1å›žå¤‰æ›´ï¼ˆåˆè¨ˆ2å›žã¾ã§ï¼‰
  - èª¬å¾—ã‚¿ã‚¤ãƒ ã¯æŠ•ç¥¨ç· åˆ‡1æ™‚é–“å‰ã‹ã‚‰é–‹å§‹
- **èª¬å¾—æ©Ÿèƒ½**: æŠ•ç¨¿ä¸»ãŒèª¬å¾—ã‚¿ã‚¤ãƒ ä¸­ã«è¿½åŠ æ„è¦‹æŠ•ç¨¿å¯èƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµæžœè¡¨ç¤º**: æŠ•ç¥¨çµæžœã®å³åº§åæ˜ ãƒ»æ£’ã‚°ãƒ©ãƒ•è¡¨ç¤º

### 4. ã‚³ãƒ¡ãƒ³ãƒˆãƒ»è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

- ãƒã‚¹ãƒˆã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ï¼ˆæ—¢å­˜ `comments` ãƒ†ãƒ¼ãƒ–ãƒ«æ´»ç”¨ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆã®Upvote/Downvoteï¼ˆæ—¢å­˜ `comment_votes` ãƒ†ãƒ¼ãƒ–ãƒ«æ´»ç”¨ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒã‚¹ãƒˆæ§‹é€ ï¼ˆparent_comment_idä½¿ç”¨ï¼‰
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°ã«ã‚ˆã‚‹ã‚³ãƒ¡ãƒ³ãƒˆå„ªå…ˆè¡¨ç¤º
- å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆãƒ»èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢ã®ç®—å‡º

### 5. ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 

#### ãƒã‚¤ãƒ³ãƒˆç²å¾—

- ä»–äººã®æŠ•ç¨¿ã«æŠ•ç¥¨: +1ãƒã‚¤ãƒ³ãƒˆ
- ä»–äººã®æŠ•ç¨¿ã«ã‚³ãƒ¡ãƒ³ãƒˆ: +0.5ãƒã‚¤ãƒ³ãƒˆ
- ãƒã‚¹ãƒˆã®è‡ªå‹•æ‹¡æ•£é”æˆ: +10ãƒã‚¤ãƒ³ãƒˆ

#### ãƒã‚¤ãƒ³ãƒˆæ¶ˆè²»

- æŠ•ç¨¿ã®å„ªå…ˆè¡¨ç¤º: -50ãƒã‚¤ãƒ³ãƒˆ
- 1æ—¥æŠ•ç¨¿åˆ¶é™è§£é™¤: -30ãƒã‚¤ãƒ³ãƒˆ
- ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆï¼ˆ2ã¤ç›®ä»¥é™ï¼‰: -100ãƒã‚¤ãƒ³ãƒˆ

#### ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 

- **èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢**: èª¬å¾—ã«ã‚ˆã‚Šä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¥¨å¤‰æ›´ã‚’ä¿ƒã—ãŸæ•°ãƒ»å‰²åˆ
- **å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆ**: æŠ•ç¨¿ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã®Upvote/Downvoteã€æŠ•ç¥¨å‚åŠ æ•°
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã”ã¨ã®ç‹¬ç«‹ç®¡ç†ï¼ˆcommunity_idä½¿ç”¨ï¼‰
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

### 6. ä¼šå“¡åˆ¶åº¦ãƒ»åŽç›ŠåŒ–

| ã‚°ãƒ¬ãƒ¼ãƒ‰     | æœˆé¡æ–™é‡‘ | 1æ—¥æŠ•ç¨¿æ•° | å„ªå…ˆè¡¨ç¤ºãƒã‚±ãƒƒãƒˆ | èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢å€çŽ‡ | ãã®ä»–ç‰¹å…¸               |
| ------------ | -------- | --------- | ---------------- | ---------------- | ------------------------ |
| ç„¡æ–™ä¼šå“¡     | 0å††      | 2æŠ•ç¨¿     | ãªã—             | 1.0å€            | -                        |
| ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ | 500å††    | 5æŠ•ç¨¿     | æœˆ3æžš            | 1.05å€           | ã‚¹ã‚³ã‚¢ãƒãƒƒã‚¸             |
| ãƒ—ãƒ©ãƒãƒŠ     | 1,200å††  | 15æŠ•ç¨¿    | æœˆ10æžš           | 1.10å€           | ã‚¹ã‚³ã‚¢ãƒãƒƒã‚¸             |
| ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ | 2,500å††  | ç„¡åˆ¶é™    | æœˆ30æžš           | 1.20å€           | é™å®šãƒãƒƒã‚¸ãƒ»å„ªå…ˆã‚µãƒãƒ¼ãƒˆ |

### 7. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ»ç™ºè¦‹æ©Ÿèƒ½

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¥¨ãƒ•ã‚£ãƒ¼ãƒ‰**: ç››ã‚Šä¸ŠãŒã£ã¦ã„ã‚‹æŠ•ç¥¨ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
- **è‡ªå‹•æ‹¡æ•£ã‚·ã‚¹ãƒ†ãƒ **: ä¸€å®šæŠ•ç¥¨æ•°ã‚’è¶…ãˆãŸãƒã‚¹ãƒˆã®ã¿è‡ªå‹•æ‹¡æ•£
- **ãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¤º**: ã‚¹ãƒšãƒ¼ã‚¹åˆ¥ãƒ»å…¨ä½“ã®äººæ°—æŠ•ç¥¨

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆSupabaseï¼‰

### ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ï¼ˆ2025-06-18æ›´æ–°ï¼‰

```sql
-- ç¾åœ¨å®Ÿè£…æ¸ˆã¿ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
CREATE TABLE communities (
    id int8 PRIMARY KEY,
    name text NOT NULL,
    description text NOT NULL,
    created_at timestamptz DEFAULT now()
);

CREATE TABLE posts (
    id int8 PRIMARY KEY,
    title text NOT NULL,
    content text NOT NULL,
    created_at timestamptz DEFAULT now(),
    image_url text,
    avatar_url text,
    vote_deadline timestamptz,
    community_id int8 REFERENCES communities(id),
    user_id text NOT NULL,
    parent_post_id int8 REFERENCES posts(id), -- ãƒã‚¹ãƒˆæŠ•ç¨¿ã®è¦ªID
    nest_level integer DEFAULT 0 CHECK (nest_level >= 0 AND nest_level <= 3), -- ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«
    target_vote_choice integer CHECK (target_vote_choice IN (-1, 1)) -- æ´¾ç”Ÿè³ªå•ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŠ•ç¥¨é¸æŠž
);

CREATE TABLE votes (
    id int8 PRIMARY KEY,
    post_id int8 NOT NULL REFERENCES posts(id),
    user_id text NOT NULL,
    vote int4 NOT NULL CHECK (vote IN (1, -1)), -- 1:è³›æˆ, -1:åå¯¾
    created_at timestamptz DEFAULT now(),
    UNIQUE(post_id, user_id)
);

CREATE TABLE comments (
    id int8 PRIMARY KEY,
    post_id int8 NOT NULL REFERENCES posts(id),
    parent_comment_id int8 REFERENCES comments(id), -- ãƒã‚¹ãƒˆæ§‹é€ 
    content text NOT NULL,
    user_id text NOT NULL,
    author text NOT NULL, -- è¡¨ç¤ºå
    created_at timestamptz DEFAULT now(),
    is_persuasion_comment boolean DEFAULT false -- èª¬å¾—ã‚³ãƒ¡ãƒ³ãƒˆè­˜åˆ¥
);

-- comment_votesãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼‰
-- â€»å®Ÿè£…çŠ¶æ³è¦ç¢ºèª
CREATE TABLE comment_votes (
    id int8 PRIMARY KEY,
    comment_id int8 NOT NULL REFERENCES comments(id),
    user_id text NOT NULL,
    vote int4 NOT NULL CHECK (vote IN (1, -1)), -- 1:Upvote, -1:Downvote
    created_at timestamptz DEFAULT now(),
    UNIQUE(comment_id, user_id)
);

-- SQLãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³: æŠ•ç¨¿ã®çµ±è¨ˆæƒ…å ±å–å¾—ï¼ˆãƒã‚¹ãƒˆæƒ…å ±ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŠ•ç¥¨é¸æŠžã‚’å«ã‚€ï¼‰
CREATE OR REPLACE FUNCTION get_posts_with_counts()
RETURNS TABLE (
    id int8,
    title text,
    content text,
    created_at timestamptz,
    image_url text,
    avatar_url text,
    vote_deadline timestamptz,
    community_id int8,
    user_id text,
    parent_post_id int8,
    nest_level integer,
    target_vote_choice integer,
    vote_count int8,
    comment_count int8
) AS $$
BEGIN
    RETURN QUERY
    SELECT
        p.id,
        p.title,
        p.content,
        p.created_at,
        p.image_url,
        p.avatar_url,
        p.vote_deadline,
        p.community_id,
        p.user_id,
        p.parent_post_id,
        COALESCE(p.nest_level, 0) as nest_level,
        p.target_vote_choice,
        COALESCE(v.vote_count, 0) as vote_count,
        COALESCE(c.comment_count, 0) as comment_count
    FROM posts p
    LEFT JOIN (
        SELECT post_id, COUNT(*) as vote_count
        FROM votes
        GROUP BY post_id
    ) v ON p.id = v.post_id
    LEFT JOIN (
        SELECT post_id, COUNT(*) as comment_count
        FROM comments
        GROUP BY post_id
    ) c ON p.id = c.post_id
    ORDER BY p.created_at DESC;
END;
$$ LANGUAGE plpgsql;

-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_posts_community_id ON posts(community_id);
CREATE INDEX idx_posts_user_id ON posts(user_id);
CREATE INDEX idx_posts_created_at ON posts(created_at);
CREATE INDEX idx_votes_post_id ON votes(post_id);
CREATE INDEX idx_votes_user_id ON votes(user_id);
CREATE INDEX idx_comments_post_id ON comments(post_id);
CREATE INDEX idx_comments_parent_id ON comments(parent_comment_id);
```

### ãƒ•ã‚§ãƒ¼ã‚º3å®Ÿè£…äºˆå®šãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ã‚«ãƒ©ãƒ 

```sql
-- ðŸš€ ãƒ•ã‚§ãƒ¼ã‚º3ã§å®Ÿè£…äºˆå®š: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
CREATE TABLE users (
    id text PRIMARY KEY, -- Supabase Authã®UUIDã¨çµ±åˆ
    email text UNIQUE NOT NULL,
    username text UNIQUE,
    avatar_url text,
    membership_tier text DEFAULT 'free' CHECK (membership_tier IN ('free', 'standard', 'platinum', 'diamond')),
    points integer DEFAULT 0,
    daily_posts_count integer DEFAULT 0,
    daily_posts_reset_date date DEFAULT current_date,
    created_at timestamptz DEFAULT now()
);

-- ðŸš€ ãƒ•ã‚§ãƒ¼ã‚º3ã§å®Ÿè£…äºˆå®š: ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
CREATE TABLE user_scores (
    id bigserial PRIMARY KEY,
    user_id text REFERENCES users(id),
    community_id int8 REFERENCES communities(id),
    persuasion_score integer DEFAULT 0,
    empathy_points integer DEFAULT 0,
    total_votes_cast integer DEFAULT 0,
    total_votes_received integer DEFAULT 0,
    updated_at timestamptz DEFAULT now(),
    UNIQUE(user_id, community_id)
);

CREATE TABLE user_achievements (
    id bigserial PRIMARY KEY,
    user_id text REFERENCES users(id),
    achievement_type text NOT NULL,
    achievement_data jsonb,
    earned_at timestamptz DEFAULT now()
);

CREATE TABLE priority_display_tickets (
    id bigserial PRIMARY KEY,
    user_id text REFERENCES users(id),
    remaining_tickets integer DEFAULT 0,
    monthly_reset_date date DEFAULT date_trunc('month', current_date),
    created_at timestamptz DEFAULT now(),
    UNIQUE(user_id)
);

-- âœ… 2025-06-18å®Ÿè£…å®Œäº†: æŠ•ç¨¿ãƒã‚¹ãƒˆæ©Ÿèƒ½ (GitHub Issue #12)
-- postsãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ æ¸ˆã¿ã‚«ãƒ©ãƒ 
-- âœ… parent_post_id int8 REFERENCES posts(id) - å®Ÿè£…æ¸ˆã¿
-- âœ… nest_level integer DEFAULT 0 CHECK (nest_level >= 0 AND nest_level <= 3) - å®Ÿè£…æ¸ˆã¿
-- âœ… target_vote_choice integer CHECK (target_vote_choice IN (-1, 1)) - å®Ÿè£…æ¸ˆã¿
--
-- ðŸ”§ ãƒ•ã‚§ãƒ¼ã‚º4ã§å®Ÿè£…äºˆå®š: è¿½åŠ æŠ•ç¨¿æ©Ÿèƒ½
-- ALTER TABLE posts ADD COLUMN option_a text;
-- ALTER TABLE posts ADD COLUMN option_b text;
-- ALTER TABLE posts ADD COLUMN is_priority boolean DEFAULT false;
-- ALTER TABLE posts ADD COLUMN auto_shared boolean DEFAULT false;

-- ðŸ”§ ãƒ•ã‚§ãƒ¼ã‚º4ã§å®Ÿè£…äºˆå®š: æŠ•ç¥¨æ©Ÿèƒ½æ‹¡å¼µ
-- votesãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ äºˆå®šã‚«ãƒ©ãƒ 
-- ALTER TABLE votes ADD COLUMN choice text; -- 'A' or 'B' or 'for' or 'against'
-- ALTER TABLE votes ADD COLUMN is_changed boolean DEFAULT false;
-- ALTER TABLE votes ADD COLUMN original_vote_time timestamptz;
-- ALTER TABLE votes ADD COLUMN persuasion_change_time timestamptz;

-- ðŸ’Ž ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒ•ã‚§ãƒ¼ã‚º3å®Ÿè£…äºˆå®šï¼‰
CREATE TABLE notifications (
    id bigserial PRIMARY KEY,
    user_id text REFERENCES users(id),
    type text NOT NULL CHECK (type IN ('vote', 'comment', 'persuasion_time', 'achievement')),
    related_post_id int8 REFERENCES posts(id),
    related_comment_id int8 REFERENCES comments(id),
    title text NOT NULL,
    message text NOT NULL,
    is_read boolean DEFAULT false,
    created_at timestamptz DEFAULT now()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–ï¼‰
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_user_scores_user_community ON user_scores(user_id, community_id);
CREATE INDEX idx_notifications_user_unread ON notifications(user_id, is_read);
CREATE INDEX idx_notifications_created_at ON notifications(created_at);
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½è¨­å®š

- æŠ•ç¥¨çµæžœã®å³åº§åæ˜ 
- ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å³åº§åæ˜ 
- ãƒ•ã‚£ãƒ¼ãƒ‰ã®å‹•çš„æ›´æ–°

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹æˆ

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ communities/
â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”œâ”€â”€ CreatePost.tsx          (æ—¢å­˜)
â”‚   â”‚   â”œâ”€â”€ CreateNestedPost.tsx    (NEW - 2025-06-18)
â”‚   â”‚   â”œâ”€â”€ PostList.tsx            (æ—¢å­˜ - ãƒã‚¹ãƒˆæ©Ÿèƒ½è¿½åŠ )
â”‚   â”‚   â”œâ”€â”€ PostDetail.tsx          (æ—¢å­˜ - ãƒã‚¹ãƒˆæ©Ÿèƒ½è¿½åŠ )
â”‚   â”‚   â”œâ”€â”€ NestedPostItem.tsx      (NEW - 2025-06-18)
â”‚   â”‚   â””â”€â”€ PostContentDisplay.tsx  (æ—¢å­˜ - å¼·åŒ–)
â”‚   â”œâ”€â”€ voting/
â”‚   â”œâ”€â”€ comments/
â”‚   â”œâ”€â”€ feed/
â”‚   â””â”€â”€ common/
â”œâ”€â”€ pages/
â”œâ”€â”€ hooks/
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ schema.tsx                  (æ—¢å­˜ - ãƒã‚¹ãƒˆæ©Ÿèƒ½è¿½åŠ )
â”œâ”€â”€ types/
â””â”€â”€ lib/
    â””â”€â”€ supabase.ts
```

### ä¸»è¦æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- **SpaceCommunityList**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§ãƒ»ä½œæˆ
- **CreatePost/CreateNestedPost**: æŠ•ç¨¿ä½œæˆãƒ»ç·¨é›†ï¼ˆ**ãƒã‚¹ãƒˆå¯¾å¿œå®Œäº†**ï¼‰
- **PostList/NestedPostItem**: æŠ•ç¨¿è¡¨ç¤ºï¼ˆ**3éšŽå±¤ãƒã‚¹ãƒˆå®Œå…¨å¯¾å¿œ**ï¼‰
- **VotingInterface**: æŠ•ç¥¨UIãƒ»çµæžœè¡¨ç¤º
- **CommentSection**: ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºãƒ»æŠ•ç¨¿ï¼ˆãƒã‚¹ãƒˆå¯¾å¿œï¼‰
- **RealtimeFeed**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¥¨ãƒ•ã‚£ãƒ¼ãƒ‰
- **UserDashboard**: ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆãƒ»ã‚¹ã‚³ã‚¢è¡¨ç¤º

## é–‹ç™ºçŠ¶æ³ãƒ»å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### âœ… å®Œå…¨å®Ÿè£…æ¸ˆã¿ (ãƒ•ã‚§ãƒ¼ã‚º1-2: ã‚³ã‚¢æ©Ÿèƒ½å®Œäº†)

#### èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

- **Google OAuthèªè¨¼** (Supabase Auth å®Œå…¨çµ±åˆ)
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ç®¡ç†** (AuthProvider + useAuth ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯)
- **è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½**
- **èªè¨¼çŠ¶æ…‹ã«åŸºã¥ãUIåˆ¶å¾¡**
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸æ©Ÿèƒ½** (ProfilePage.tsx - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ»çµ±è¨ˆãƒ»æŠ•ç¨¿ä¸€è¦§è¡¨ç¤º)

#### æŠ•ç¨¿ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ 

- **æŠ•ç¨¿ä½œæˆãƒ»è¡¨ç¤ºãƒ»è©³ç´°æ©Ÿèƒ½** (CreatePost, PostList, PostItem, PostDetail)
- **ãƒã‚¹ãƒˆæŠ•ç¨¿ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å®Ÿè£…** (CreateNestedPost, NestedPostItem - **2025-06-18æ–°è¦è¿½åŠ **)
- **3éšŽå±¤ãƒã‚¹ãƒˆæ§‹é€ å¯¾å¿œ** (parent_post_id, nest_levelå®Œå…¨å®Ÿè£…)
- **æŠ•ç¥¨è€…ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæ©Ÿèƒ½** (target_vote_choice: è³›æˆè€…å‘ã‘/åå¯¾è€…å‘ã‘/å…¨å“¡å‘ã‘)
- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£/ã‚¹ãƒšãƒ¼ã‚¹å®Œå…¨æ©Ÿèƒ½** (CommunityList, CommunityItem, CreateCommunity)
- **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½** (Supabase Storage: post-images ãƒã‚±ãƒƒãƒˆ)
- **æŠ•ç¨¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°** (ã™ã¹ã¦/æœŸé™é–“è¿‘/äººæ°—/æ–°ç€ã‚¿ãƒ–)
- **ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³** (React Hook Form + Zod)

#### æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ  (ã‚³ã‚¢æ©Ÿèƒ½)

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¥¨æ©Ÿèƒ½** (è³›æˆ/åå¯¾æŠ•ç¥¨)
- **æ¥½è¦³çš„UIæ›´æ–°** (TanStack Query ã«ã‚ˆã‚‹æœ€é©åŒ–)
- **æŠ•ç¥¨æœŸé™ç®¡ç†** (vote_deadline å®Œå…¨å®Ÿè£…)
- **èª¬å¾—ã‚¿ã‚¤ãƒ æ©Ÿèƒ½** (æœŸé™1æ™‚é–“å‰ã‹ã‚‰æŠ•ç¨¿è€…ã‚³ãƒ¡ãƒ³ãƒˆå¯èƒ½)
- **æŠ•ç¥¨çµæžœè¦–è¦šåŒ–** (VoteGageBar ã«ã‚ˆã‚‹æ£’ã‚°ãƒ©ãƒ•è¡¨ç¤º)
- **æŠ•ç¥¨çµ±è¨ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**

#### ã‚³ãƒ¡ãƒ³ãƒˆãƒ»è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

- **ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ»è¡¨ç¤ºæ©Ÿèƒ½** (CommentSection å®Œå…¨å®Ÿè£…)
- **ãƒã‚¹ãƒˆæ§‹é€ å¯¾å¿œ** (è¦ªå­é–¢ä¿‚ã‚³ãƒ¡ãƒ³ãƒˆ: parent_comment_id)
- **ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¥¨æ©Ÿèƒ½** (CommentVotes: Upvote/Downvote)
- **èª¬å¾—ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½** (æŠ•ç¨¿è€…å°‚ç”¨ã‚³ãƒ¡ãƒ³ãƒˆ: is_persuasion_comment)
- **ã‚³ãƒ¡ãƒ³ãƒˆæ•°ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**

#### UI/UXã‚·ã‚¹ãƒ†ãƒ 

- **Radix UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ** (ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ)
- **Tailwind CSS 4.1.4** (å®Œå…¨ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³)
- **ãƒ¢ãƒ€ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** (Navbar, SideBar, RightPanel)
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** (Navbar ã‚¢ãƒã‚¿ãƒ¼ã‹ã‚‰ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯)
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æžœ** (ã‚¹ãƒ ãƒ¼ã‚ºãªãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³)
- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ** (éƒ¨åˆ†å®Ÿè£…)

#### çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ (å®Œå…¨æœ€é©åŒ–)

- **Jotai åŽŸå­çš„çŠ¶æ…‹ç®¡ç†** (PostAtom, CommentVoteAtom)
- **TanStack Query 5.74.4** (ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»æ¥½è¦³çš„æ›´æ–°)
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯** (useHandlePost, useHandleVotes å®Œå…¨å®Ÿè£…)
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** (ErrorMessage, Loading ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- **Supabaseå®Œå…¨çµ±åˆ** (PostgreSQL + Auth + Storage + Real-time)
- **ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ å®Œæˆ** (posts, votes, comments, communities, comment_votes)
- **SQLãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³** (get_posts_with_counts: æŠ•ç¥¨æ•°ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ•°é›†è¨ˆ)
- **Row Level Security (RLS)** åŸºæœ¬å®Ÿè£…æ¸ˆã¿

### âš ï¸ éƒ¨åˆ†å®Ÿè£…ãƒ»æ”¹å–„å¯¾è±¡

#### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢æ©Ÿèƒ½

- **åŸºæœ¬ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…æ¸ˆã¿** (ã‚¿ãƒ–æ©Ÿèƒ½)
- **é«˜åº¦ãªæ¤œç´¢æ©Ÿèƒ½**: å…¨æ–‡æ¤œç´¢ãƒ»è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœªå®Ÿè£…
- **ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½**: äººæ°—åº¦ãƒ»æ–°ç€ä»¥å¤–ã®è©³ç´°ã‚½ãƒ¼ãƒˆæœªå®Ÿè£…

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½

- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºæ©Ÿèƒ½**: å®Œå…¨å®Ÿè£…æ¸ˆã¿
  - è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«(/profile)ãƒ»ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«(/profile/:userId)å¯¾å¿œ
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆæƒ…å ±è¡¨ç¤ºï¼ˆæŠ•ç¨¿æ•°ã€æŠ•ç¥¨æ•°ã€ã‚³ãƒ¡ãƒ³ãƒˆæ•°ã€å‚åŠ æ—¥ï¼‰
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥æŠ•ç¨¿ä¸€è¦§è¡¨ç¤º
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†**: æœªå®Ÿè£…

### âœ… æœ€æ–°å®Ÿè£…å®Œäº†æ©Ÿèƒ½ (2025-06-18)

#### ãƒã‚¹ãƒˆæŠ•ç¨¿æ©Ÿèƒ½ (**GitHub Issue #12 - å®Œå…¨å®Ÿè£…æ¸ˆã¿**)

- **æŠ•ç¨¿ã®3æ®µéšŽãƒã‚¹ãƒˆæ§‹é€ **: æŠ•ç¨¿ã¯æœ€å¤§3æ®µéšŽã¾ã§ãƒã‚¹ãƒˆå¯èƒ½ï¼ˆä¾‹ï¼šæœ¬ãƒã‚¹ãƒˆâ†’è³›æˆã¨ç­”ãˆãŸäººã«æ´¾ç”Ÿè³ªå•â†’ã•ã‚‰ã«æ·±æŽ˜ã‚Šè³ªå•ï¼‰**å®Œå…¨å®Ÿè£…æ¸ˆã¿**
- **parent_post_id ã‚’æ´»ç”¨ã—ãŸéšŽå±¤æ§‹é€ è¡¨ç¤º**: **å®Œå…¨å®Ÿè£…æ¸ˆã¿**
- **ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸUIè¡¨ç¤ºèª¿æ•´**: **å®Œå…¨å®Ÿè£…æ¸ˆã¿**
- **æ´¾ç”ŸæŠ•ç¨¿ä½œæˆæ©Ÿèƒ½**: **å®Œå…¨å®Ÿè£…æ¸ˆã¿**
- **æŠ•ç¥¨è€…ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæ©Ÿèƒ½**: è³›æˆè€…å‘ã‘/åå¯¾è€…å‘ã‘/å…¨å“¡å‘ã‘ã®çµžã‚Šè¾¼ã¿**å®Œå…¨å®Ÿè£…æ¸ˆã¿**
- **æ–°è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: CreateNestedPost.tsx, NestedPostItem.tsx **å®Œå…¨å®Ÿè£…æ¸ˆã¿**

### âŒ æœªå®Ÿè£…æ©Ÿèƒ½

#### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

- Supabase Real-time é€šçŸ¥æ©Ÿèƒ½
- æŠ•ç¥¨ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆé€šçŸ¥
- èª¬å¾—ã‚¿ã‚¤ãƒ é–‹å§‹é€šçŸ¥

#### ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ  (**GitHub Issue #13 - æ¬¡æœŸå®Ÿè£…å¯¾è±¡**)

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¤ãƒ³ãƒˆç®¡ç†
- èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢ç®—å‡º
- å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆæ©Ÿèƒ½ (**GitHub Issue #2ã¨ã®é€£æº**)
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

#### ä¼šå“¡åˆ¶åº¦ãƒ»åŽç›ŠåŒ–

- ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ç®¡ç†
- æŠ•ç¨¿åˆ¶é™æ©Ÿèƒ½
- å„ªå…ˆè¡¨ç¤ºãƒã‚±ãƒƒãƒˆ
- æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

#### ç®¡ç†ãƒ»ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

- æŠ•ç¨¿å‰Šé™¤ãƒ»ç·¨é›†æ©Ÿèƒ½
- ä¸é©åˆ‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–

- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- ç”»åƒæœ€é©åŒ–ãƒ»CDNè¨­å®š
- SEOæœ€é©åŒ–
- PWAå¯¾å¿œ

### ðŸ“‹ ä»Šå¾Œã®é–‹ç™ºå„ªå…ˆé †ä½

#### ðŸš€ **ãƒ•ã‚§ãƒ¼ã‚º3: ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ»ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ** (å„ªå…ˆåº¦: é«˜)

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ** (**GitHub Issue #13 - æœ€å„ªå…ˆ**)

   - usersãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ»çµ±åˆ
   - ãƒã‚¤ãƒ³ãƒˆç²å¾—ãƒ»æ¶ˆè²»ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
   - ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ç®¡ç†æ©Ÿèƒ½
   - æŠ•ç¨¿åˆ¶é™ãƒ»å„ªå…ˆè¡¨ç¤ºæ©Ÿèƒ½

2. **ã‚³ãƒ¡ãƒ³ãƒˆå…±æ„Ÿãƒ»èª¬å¾—åŠ›ã‚·ã‚¹ãƒ†ãƒ ** (**GitHub Issue #2 - é«˜å„ªå…ˆåº¦**)

   - å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆæ©Ÿèƒ½å®Ÿè£…
   - èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢ç®—å‡ºã‚·ã‚¹ãƒ†ãƒ 
   - ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 
   - ã‚³ãƒ¡ãƒ³ãƒˆè©•ä¾¡ã®å¯è¦–åŒ–

3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ **

   - Supabase Real-time é€šçŸ¥æ©Ÿèƒ½
   - æŠ•ç¥¨ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆãƒ»èª¬å¾—ã‚¿ã‚¤ãƒ é–‹å§‹é€šçŸ¥
   - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€£æº

4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½å¼·åŒ–**
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†æ©Ÿèƒ½
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆãƒ»ã‚¹ã‚³ã‚¢è©³ç´°è¡¨ç¤º
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒã‚¸ãƒ»å®Ÿç¸¾ã‚·ã‚¹ãƒ†ãƒ 

#### ðŸ”§ **ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒ»UXæ”¹å–„** (å„ªå…ˆåº¦: ä¸­)

1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–**

   - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
   - ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   - ç”»åƒæœ€é©åŒ–ãƒ»CDNè¨­å®š
   - SEOæœ€é©åŒ–

2. **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¼·åŒ–**

   - å…¨æ–‡æ¤œç´¢æ©Ÿèƒ½
   - è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
   - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½æ‹¡å¼µ

3. **PWAãƒ»ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**
   - Service Workerå®Ÿè£…
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
   - ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨UIæ”¹å–„

#### ðŸ’Ž **ãƒ•ã‚§ãƒ¼ã‚º5: ä¼šå“¡åˆ¶åº¦ãƒ»åŽç›ŠåŒ–** (å„ªå…ˆåº¦: ä¸­)

1. **ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ **

   - ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ç®¡ç†
   - æŠ•ç¨¿åˆ¶é™ãƒ»å„ªå…ˆè¡¨ç¤ºæ©Ÿèƒ½
   - æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ çµ±åˆ (Stripe)

2. **ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½**
   - å„ªå…ˆè¡¨ç¤ºãƒã‚±ãƒƒãƒˆ
   - é«˜åº¦ãªçµ±è¨ˆãƒ»åˆ†æž
   - é™å®šãƒãƒƒã‚¸ãƒ»ç‰¹å…¸

#### ðŸ› ï¸ **ãƒ•ã‚§ãƒ¼ã‚º6: ç®¡ç†ãƒ»é‹ç”¨ã‚·ã‚¹ãƒ†ãƒ ** (å„ªå…ˆåº¦: ä½Ž)

1. **ç®¡ç†ãƒ»ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½**

   - æŠ•ç¨¿å‰Šé™¤ãƒ»ç·¨é›†æ©Ÿèƒ½
   - ä¸é©åˆ‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ»åˆ¶è£ã‚·ã‚¹ãƒ†ãƒ 

2. **é‹ç”¨ãƒ»ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ **

   - ç›£è¦–ãƒ»åˆ†æžã‚·ã‚¹ãƒ†ãƒ 
   - ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ç›£è¦–

3. **APIãƒ»å¤–éƒ¨é€£æº**
   - REST APIå…¬é–‹
   - å¤–éƒ¨SNSé€£æº
   - Webhookçµ±åˆ

## æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®çµ±åˆãƒã‚¤ãƒ³ãƒˆ

- `communities` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã€Œã‚¹ãƒšãƒ¼ã‚¹ã€ã¨ã—ã¦æ´»ç”¨
- `votes.vote` (int4) ã‚’é¸æŠžè‚¢ç®¡ç†ã«æ‹¡å¼µï¼ˆA/B, è³›æˆ/åå¯¾ï¼‰
- `comments` ã®ãƒã‚¹ãƒˆæ§‹é€ ï¼ˆparent_comment_idï¼‰ã‚’æ´»ç”¨
- `comment_votes` ã§ã‚³ãƒ¡ãƒ³ãƒˆè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰
- æ–°è¦ `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã§æ—¢å­˜ã® `user_id` (text) ã‚’çµ±åˆ

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è¦ä»¶

- Row Level Security (RLS) ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- æŠ•ç¨¿ãƒ»æŠ•ç¥¨ã®åˆ¶é™ãƒ»ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®åˆ¶é™ãƒ»æ¤œè¨¼
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®æœ€é©åŒ–
- å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è€ƒæ…®

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨

- Vercel/Netlify ã§ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤
- Supabase ã§ã®è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- ç›£è¦–ãƒ»åˆ†æžã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

## é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹

- TypeScript ã®åž‹å®‰å…¨æ€§ã‚’é‡è¦–
- Supabase ã®åˆ¶é™ãƒ»èª²é‡‘ä½“ç³»ã‚’è€ƒæ…®
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã® responsive design
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿
