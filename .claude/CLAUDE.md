# Conversation Guidelines

- å¸¸ã«æ—¥æœ¬èªã§ä¼šè©±ã™ã‚‹

# æŠ•ç¥¨ãƒ»è­°è«–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã®ã€Œã‚¹ãƒšãƒ¼ã‚¹ã€ã‚’ä½œæˆã—ã€2æŠæŠ•ç¥¨ã§æ„è¦‹ã‚’å‹Ÿã‚Šè­°è«–ã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®æŠ•ç¥¨çµæœè¡¨ç¤ºã€èª¬å¾—æ©Ÿèƒ½ã€ãƒã‚¤ãƒ³ãƒˆåˆ¶åº¦ã‚’å«ã‚€é«˜æ©Ÿèƒ½ãªæŠ•ç¥¨ãƒ»è­°è«–ã‚·ã‚¹ãƒ†ãƒ ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React 19, TypeScript
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Supabase (Database, Auth, Real-time)
- **UI/UX**: Modern responsive design
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½**: Supabase Real-time subscriptions

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶ãƒ»æ©Ÿèƒ½ä»•æ§˜

### 1. èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

- Supabase Auth ã«ã‚ˆã‚‹èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã‚¢ãƒã‚¿ãƒ¼ã€çµ±è¨ˆæƒ…å ±ï¼‰
- ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ç®¡ç†ï¼ˆç„¡æ–™/ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰/ãƒ—ãƒ©ãƒãƒŠ/ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ï¼‰

### 2. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»æŠ•ç¨¿ã‚·ã‚¹ãƒ†ãƒ 

- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£**: æ—¢å­˜ã® `communities` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ´»ç”¨ï¼ˆã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã‚¹ãƒšãƒ¼ã‚¹ï¼‰
- **ãƒã‚¹ãƒˆæŠ•ç¨¿**: 2æŠæŠ•ç¥¨ï¼ˆè³›æˆ/åå¯¾ã€A/Bç­‰ï¼‰ã‚’å«ã‚€è­°é¡ŒæŠ•ç¨¿
- **ãƒã‚¹ãƒˆæ§‹é€ **: æœ€å¤§3æ®µéšã¾ã§ã®æŠ•ç¨¿ãƒã‚¹ãƒˆå¯¾å¿œï¼ˆparent_post_idä½¿ç”¨ï¼‰
- **ãƒ¡ãƒ‡ã‚£ã‚¢å¯¾å¿œ**: ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç”»åƒã®ã¿ï¼ˆimage_url, avatar_urlæ´»ç”¨ï¼‰

### 3. æŠ•ç¥¨ãƒ»èª¬å¾—ã‚·ã‚¹ãƒ†ãƒ 

- **æŠ•ç¥¨ãƒ«ãƒ¼ãƒ«**:
  - åˆå›æŠ•ç¥¨ + èª¬å¾—ã‚¿ã‚¤ãƒ ä¸­ã®1å›å¤‰æ›´ï¼ˆåˆè¨ˆ2å›ã¾ã§ï¼‰
  - èª¬å¾—ã‚¿ã‚¤ãƒ ã¯æŠ•ç¥¨ç· åˆ‡1æ™‚é–“å‰ã‹ã‚‰é–‹å§‹
- **èª¬å¾—æ©Ÿèƒ½**: æŠ•ç¨¿ä¸»ãŒèª¬å¾—ã‚¿ã‚¤ãƒ ä¸­ã«è¿½åŠ æ„è¦‹æŠ•ç¨¿å¯èƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµæœè¡¨ç¤º**: æŠ•ç¥¨çµæœã®å³åº§åæ˜ ãƒ»æ£’ã‚°ãƒ©ãƒ•è¡¨ç¤º

### 4. ã‚³ãƒ¡ãƒ³ãƒˆãƒ»è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

- ãƒã‚¹ãƒˆã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ï¼ˆæ—¢å­˜ `comments` ãƒ†ãƒ¼ãƒ–ãƒ«æ´»ç”¨ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆã®Upvote/Downvoteï¼ˆæ—¢å­˜ `comment_votes` ãƒ†ãƒ¼ãƒ–ãƒ«æ´»ç”¨ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆã®ãƒã‚¹ãƒˆæ§‹é€ ï¼ˆparent_comment_idä½¿ç”¨ï¼‰
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°ã«ã‚ˆã‚‹ã‚³ãƒ¡ãƒ³ãƒˆå„ªå…ˆè¡¨ç¤º
- å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆãƒ»èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢ã®ç®—å‡º

### 5. ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 

#### ãƒã‚¤ãƒ³ãƒˆç²å¾—

- ä»–äººã®æŠ•ç¨¿ã«æŠ•ç¥¨: +1ãƒã‚¤ãƒ³ãƒˆ
- ä»–äººã®æŠ•ç¨¿ã«ã‚³ãƒ¡ãƒ³ãƒˆ: +0.5ãƒã‚¤ãƒ³ãƒˆ
- ãƒã‚¹ãƒˆã®è‡ªå‹•æ‹¡æ•£é”æˆ: +10ãƒã‚¤ãƒ³ãƒˆ

#### ãƒã‚¤ãƒ³ãƒˆæ¶ˆè²»

- æŠ•ç¨¿ã®å„ªå…ˆè¡¨ç¤º: -50ãƒã‚¤ãƒ³ãƒˆ
- 1æ—¥æŠ•ç¨¿åˆ¶é™è§£é™¤: -30ãƒã‚¤ãƒ³ãƒˆ
- ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆï¼ˆ2ã¤ç›®ä»¥é™ï¼‰: -100ãƒã‚¤ãƒ³ãƒˆ

#### ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 

- **èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢**: èª¬å¾—ã«ã‚ˆã‚Šä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¥¨å¤‰æ›´ã‚’ä¿ƒã—ãŸæ•°ãƒ»å‰²åˆ
- **å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆ**: æŠ•ç¨¿ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã®Upvote/Downvoteã€æŠ•ç¥¨å‚åŠ æ•°
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã”ã¨ã®ç‹¬ç«‹ç®¡ç†ï¼ˆcommunity_idä½¿ç”¨ï¼‰
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

### 6. ä¼šå“¡åˆ¶åº¦ãƒ»åç›ŠåŒ–

| ã‚°ãƒ¬ãƒ¼ãƒ‰     | æœˆé¡æ–™é‡‘ | 1æ—¥æŠ•ç¨¿æ•° | å„ªå…ˆè¡¨ç¤ºãƒã‚±ãƒƒãƒˆ | èª¬å¾—åŠ›ã‚¹ã‚³ã‚¢å€ç‡ | ãã®ä»–ç‰¹å…¸               |
| ------------ | -------- | --------- | ---------------- | ---------------- | ------------------------ |
| ç„¡æ–™ä¼šå“¡     | 0å††      | 2æŠ•ç¨¿     | ãªã—             | 1.0å€            | -                        |
| ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ | 500å††    | 5æŠ•ç¨¿     | æœˆ3æš            | 1.05å€           | ã‚¹ã‚³ã‚¢ãƒãƒƒã‚¸             |
| ãƒ—ãƒ©ãƒãƒŠ     | 1,200å††  | 15æŠ•ç¨¿    | æœˆ10æš           | 1.10å€           | ã‚¹ã‚³ã‚¢ãƒãƒƒã‚¸             |
| ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ | 2,500å††  | ç„¡åˆ¶é™    | æœˆ30æš           | 1.20å€           | é™å®šãƒãƒƒã‚¸ãƒ»å„ªå…ˆã‚µãƒãƒ¼ãƒˆ |

### 7. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ»ç™ºè¦‹æ©Ÿèƒ½

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¥¨ãƒ•ã‚£ãƒ¼ãƒ‰**: ç››ã‚Šä¸ŠãŒã£ã¦ã„ã‚‹æŠ•ç¥¨ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
- **è‡ªå‹•æ‹¡æ•£ã‚·ã‚¹ãƒ†ãƒ **: ä¸€å®šæŠ•ç¥¨æ•°ã‚’è¶…ãˆãŸãƒã‚¹ãƒˆã®ã¿è‡ªå‹•æ‹¡æ•£
- **ãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¤º**: ã‚¹ãƒšãƒ¼ã‚¹åˆ¥ãƒ»å…¨ä½“ã®äººæ°—æŠ•ç¥¨

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆSupabaseï¼‰

### ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

```sql
-- æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆç¾åœ¨ã®æ§‹é€ ï¼‰
communities (
  id int8 primary key,
  created_at timestamptz,
  name text,
  description text
)

posts (
  id int8 primary key,
  created_at timestamptz,
  title text,
  content text,
  image_url text,
  avatar_url text,
  community_id int8 references communities(id)
)

votes (
  id int8 primary key,
  created_at timestamptz,
  post_id int8 references posts(id),
  user_id text,
  vote int4
)

comments (
  id int8 primary key,
  created_at timestamptz,
  post_id int8 references posts(id),
  content text,
  user_id text,
  author text,
  parent_comment_id int8 references comments(id) -- ãƒã‚¹ãƒˆæ§‹é€ 
)

comment_votes (
  id int8 primary key,
  created_at timestamptz,
  user_id text,
  vote int4,
  comment_id int8 references comments(id)
)
```

### å¿…è¦ãªè¿½åŠ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ã‚«ãƒ©ãƒ 

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ–°è¦ä½œæˆå¿…è¦ï¼‰
users (
  id text primary key, -- æ—¢å­˜ã®user_idã¨çµ±åˆ
  email text,
  username text unique,
  avatar_url text,
  membership_tier text default 'free',
  points integer default 0,
  daily_posts_count integer default 0,
  daily_posts_reset_date date default current_date,
  created_at timestamptz default now()
)

-- postsãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ å¿…è¦ãªã‚«ãƒ©ãƒ 
ALTER TABLE posts ADD COLUMN author_id text references users(id);
ALTER TABLE posts ADD COLUMN parent_post_id int8 references posts(id); -- ãƒã‚¹ãƒˆæ§‹é€ 
ALTER TABLE posts ADD COLUMN option_a text;
ALTER TABLE posts ADD COLUMN option_b text;
ALTER TABLE posts ADD COLUMN voting_deadline timestamptz;
ALTER TABLE posts ADD COLUMN persuasion_start_time timestamptz;
ALTER TABLE posts ADD COLUMN is_priority boolean default false;
ALTER TABLE posts ADD COLUMN auto_shared boolean default false;

-- votesãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¿®æ­£
ALTER TABLE votes ALTER COLUMN user_id TYPE text;
ALTER TABLE votes ADD COLUMN choice text; -- 'A' or 'B' or 'for' or 'against'
ALTER TABLE votes ADD COLUMN is_changed boolean default false;
ALTER TABLE votes ADD COLUMN original_vote_time timestamptz;

-- commentsãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¿®æ­£
ALTER TABLE comments ADD COLUMN upvotes integer default 0;
ALTER TABLE comments ADD COLUMN downvotes integer default 0;

-- æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«
user_scores (
  id bigserial primary key,
  user_id text references users(id),
  community_id int8 references communities(id),
  persuasion_score integer default 0,
  empathy_points integer default 0,
  updated_at timestamptz default now()
)

user_achievements (
  id bigserial primary key,
  user_id text references users(id),
  achievement_type text,
  achievement_data jsonb,
  earned_at timestamptz default now()
)

priority_display_tickets (
  id bigserial primary key,
  user_id text references users(id),
  remaining_tickets integer default 0,
  monthly_reset_date date default date_trunc('month', current_date),
  created_at timestamptz default now()
)
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½è¨­å®š

- æŠ•ç¥¨çµæœã®å³åº§åæ˜ 
- ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å³åº§åæ˜ 
- ãƒ•ã‚£ãƒ¼ãƒ‰ã®å‹•çš„æ›´æ–°

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹æˆ

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ communities/
â”‚   â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ voting/
â”‚   â”œâ”€â”€ comments/
â”‚   â”œâ”€â”€ feed/
â”‚   â””â”€â”€ common/
â”œâ”€â”€ pages/
â”œâ”€â”€ hooks/
â”œâ”€â”€ utils/
â”œâ”€â”€ types/
â””â”€â”€ lib/
    â””â”€â”€ supabase.ts
```

### ä¸»è¦æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- **SpaceCommunityList**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§ãƒ»ä½œæˆ
- **PostEditor**: æŠ•ç¨¿ä½œæˆãƒ»ç·¨é›†
- **VotingInterface**: æŠ•ç¥¨UIãƒ»çµæœè¡¨ç¤º
- **CommentSection**: ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºãƒ»æŠ•ç¨¿ï¼ˆãƒã‚¹ãƒˆå¯¾å¿œï¼‰
- **RealtimeFeed**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¥¨ãƒ•ã‚£ãƒ¼ãƒ‰
- **UserDashboard**: ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆãƒ»ã‚¹ã‚³ã‚¢è¡¨ç¤º

## é–‹ç™ºçŠ¶æ³ãƒ»å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### âœ… å®Ÿè£…æ¸ˆã¿ (ãƒ•ã‚§ãƒ¼ã‚º1-2)

#### èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

- Google OAuthèªè¨¼ã‚·ã‚¹ãƒ†ãƒ  (Supabase Auth)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ãƒ»ç®¡ç† (avatar_url, user_name)
- AuthProvider + useAuth ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯

#### æŠ•ç¨¿ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ 

- æŠ•ç¨¿ä½œæˆãƒ»è¡¨ç¤ºãƒ»è©³ç´°æ©Ÿèƒ½ (CreatePost, PostList, PostItem, PostDetail)
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£/ã‚¹ãƒšãƒ¼ã‚¹æ©Ÿèƒ½ (Community components)
- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ (post-images ãƒã‚±ãƒƒãƒˆ)
- æŠ•ç¨¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° (Home, Hot, New ã‚¿ãƒ–)

#### æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ 

- åŸºæœ¬æŠ•ç¥¨æ©Ÿèƒ½ (VoteButton, VoteGageBar)
- æŠ•ç¥¨æœŸé™ç®¡ç† (vote_deadline)
- æ¥½è¦³çš„UIæ›´æ–° (TanStack Query)
- æŠ•ç¥¨çµ±è¨ˆè¡¨ç¤º

#### ã‚³ãƒ¡ãƒ³ãƒˆãƒ»è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

- ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ»è¡¨ç¤ºæ©Ÿèƒ½
- ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®Upvote/Downvote
- ãƒã‚¹ãƒˆæ§‹é€ å¯¾å¿œ (parent_comment_id)
- èª¬å¾—ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ (is_persuasion_comment)

#### UI/UXã‚·ã‚¹ãƒ†ãƒ 

- ShadCN/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ
- Tailwind CSS ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ (Navbar, SideBar, RightPanel)
- ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒå¯¾å¿œ

#### çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ

- Jotai ã«ã‚ˆã‚‹åŸå­çš„çŠ¶æ…‹ç®¡ç† (postsAtom, filteredPostsAtom)
- TanStack Query ã§ã®ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç®¡ç†
- ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (useHandlePost, useHandleVotes)

### ğŸš§ å®Ÿè£…ä¸­ãƒ»æ”¹å–„ãŒå¿…è¦

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

- æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«: posts, votes, comments, communities, comment_votes
- user_id (string) ã«ã‚ˆã‚‹é–¢é€£ä»˜ã‘
- å‹å®‰å…¨æ€§: æ‰‹å‹•å‹å®šç¾©ï¼ˆSupabaseå‹ç”Ÿæˆæœªä½¿ç”¨ï¼‰

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æœªå®Ÿè£…
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½æœªå®Ÿè£…
- ç”»åƒæœ€é©åŒ–ãƒ»CDNæœªè¨­å®š

### ğŸ“‹ ä»Šå¾Œã®é–‹ç™ºå„ªå…ˆé †ä½

1. **ãƒ•ã‚§ãƒ¼ã‚º3**: èª¬å¾—æ©Ÿèƒ½ãƒ»ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°

   - èª¬å¾—ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®å®Œå…¨å®Ÿè£…
   - ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½

2. **ãƒ•ã‚§ãƒ¼ã‚º4**: ä¼šå“¡åˆ¶åº¦ãƒ»åç›ŠåŒ–ãƒ»å„ªå…ˆè¡¨ç¤ºæ©Ÿèƒ½

   - users ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆãƒ»çµ±åˆ
   - ä¼šå“¡ã‚°ãƒ¬ãƒ¼ãƒ‰ç®¡ç†
   - æŠ•ç¨¿åˆ¶é™ãƒ»å„ªå…ˆè¡¨ç¤ºæ©Ÿèƒ½

3. **ãƒ•ã‚§ãƒ¼ã‚º5**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ»æ‹¡æ•£ã‚·ã‚¹ãƒ†ãƒ 

   - Supabase Real-time çµ±åˆ
   - è‡ªå‹•æ‹¡æ•£ã‚·ã‚¹ãƒ†ãƒ 
   - ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰æ©Ÿèƒ½

4. **ãƒ•ã‚§ãƒ¼ã‚º6**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»é‹ç”¨æ”¹å–„
   - Supabaseå‹ç”Ÿæˆçµ±åˆ
   - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
   - ç›£è¦–ãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ 

## æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®çµ±åˆãƒã‚¤ãƒ³ãƒˆ

- `communities` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã€Œã‚¹ãƒšãƒ¼ã‚¹ã€ã¨ã—ã¦æ´»ç”¨
- `votes.vote` (int4) ã‚’é¸æŠè‚¢ç®¡ç†ã«æ‹¡å¼µï¼ˆA/B, è³›æˆ/åå¯¾ï¼‰
- `comments` ã®ãƒã‚¹ãƒˆæ§‹é€ ï¼ˆparent_comment_idï¼‰ã‚’æ´»ç”¨
- `comment_votes` ã§ã‚³ãƒ¡ãƒ³ãƒˆè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰
- æ–°è¦ `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã§æ—¢å­˜ã® `user_id` (text) ã‚’çµ±åˆ

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

- Row Level Security (RLS) ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- æŠ•ç¨¿ãƒ»æŠ•ç¥¨ã®åˆ¶é™ãƒ»ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®åˆ¶é™ãƒ»æ¤œè¨¼
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®æœ€é©åŒ–
- å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨

- Vercel/Netlify ã§ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤
- Supabase ã§ã®è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- ç›£è¦–ãƒ»åˆ†æã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

## é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹

- TypeScript ã®å‹å®‰å…¨æ€§ã‚’é‡è¦–
- Supabase ã®åˆ¶é™ãƒ»èª²é‡‘ä½“ç³»ã‚’è€ƒæ…®
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã® responsive design
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿
